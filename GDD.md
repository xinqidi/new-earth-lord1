# 游戏设计文档 (GDD)
# 《地球新主 Earth Lord》

**版本:** 1.0
**创建日期:** 2025-12-23
**游戏类型:** LBS 生存建造游戏
**目标平台:** iOS

---

## 1. 游戏概述

### 1.1 核心概念
《地球新主》是一款将现实世界与虚拟游戏深度融合的LBS生存游戏。玩家通过在现实世界中行走来圈占领地、探索废墟、收集资源，在末日废土背景下重建文明。

### 1.2 核心设计理念
- **Walk to Earn**: 将运动健身转化为游戏奖励
- **真实地理映射**: 现实世界的每一步都在游戏中留下痕迹
- **希望朋克美学**: 在废土中传递重建与希望的主题
- **平衡单机与社交**: 既可独自探索，也能协作共赢

### 1.3 目标受众
- **核心玩家**: 喜欢户外运动、探索的年轻人（18-35岁）
- **休闲玩家**: 通勤上班族，利用碎片时间游玩
- **社交玩家**: 喜欢与附近玩家互动的社区型玩家

### 1.4 游戏时长设计
- **日均游戏时间**: 30-60分钟
- **单次游戏时长**: 10-20分钟（通勤、午休、饭后散步）
- **游戏生命周期**: 3-6个月（通过活动和更新延长）

---

## 2. 世界观与叙事

### 2.1 世界观设定

#### 2.1.1 历史背景
**2048年 - 终末战争**
- 第三次世界大战爆发，AI武器失控
- 全球核心城市在72小时内毁灭
- 99%的人口在战争和随后的瘟疫中消失
- 旧世界的秩序和法律完全崩溃

**2049-2050年 - 寂静时代**
- 幸存者躲藏在避难所中
- 地表辐射值逐渐降低
- 自然开始收复城市废墟
- 零星的幸存者开始走出避难所

**2051年 - 新开拓时代**
- 各地幸存者组织达成《新开拓者协议》
- 宣布旧世界的土地所有权失效
- 颁布新的开拓法则："凡以双足丈量之无主土地，皆为开拓者所有"
- 卫星系统恢复运作，开始记录开拓者的足迹

#### 2.1.2 视觉风格：希望朋克
- **废土元素**: 破败的建筑、锈迹斑斑的金属、荒废的街道
- **新生元素**: 破土而出的绿色植物、新建的木屋、闪亮的信号灯
- **色彩基调**: 主色为绿色和蓝色（希望、生机），辅色为锈红和灰褐（废土）
- **UI风格**: 末日科技感，模拟老旧终端界面，带有扫描线和噪点效果

### 2.2 核心叙事

#### 2.2.1 主线故事
玩家作为一名从避难所醒来的幸存者，加入《新开拓者协议》，开始在废土上重建家园的旅程。

**故事节点**:
1. **觉醒**（教程）: 从避难所醒来，了解新世界的规则
2. **首次圈地**（第1天）: 完成第一块领地的占领
3. **首次探索**（第3天）: 发现第一个POI，获得资源
4. **首次建造**（第7天）: 建造第一个庇护所
5. **首次交易**（第14天）: 与其他开拓者完成交易
6. **建立联盟**（第30天）: 加入或创建联盟（v2.0）
7. **传奇开拓者**（第90天）: 成为区域排名前列的开拓者

#### 2.2.2 支线故事
- **废墟日志**: 探索特殊POI时触发，讲述旧世界的故事
- **幸存者传说**: 从NPC收音机广播中了解其他区域的故事
- **联盟战记**: 联盟之间的合作与竞争故事（v2.0）

---

## 3. 游戏系统设计

### 3.1 核心循环

```
┌─────────────────────────────────────────────────┐
│              游戏核心循环（1日循环）                   │
├─────────────────────────────────────────────────┤
│                                                 │
│  1. 登录游戏，领取每日奖励                           │
│         ↓                                       │
│  2. 查看每日任务和成就                              │
│         ↓                                       │
│  3. 外出探索（通勤/散步）                            │
│     • 圈占新领地（如果发现无主地）                     │
│     • 搜刮POI获取资源                              │
│     • 在公共频道与附近玩家聊天                        │
│         ↓                                       │
│  4. 回到领地（打开背包）                             │
│     • 查看收获的资源                                │
│     • 建造/升级建筑                                 │
│     • 使用食物/水恢复体征                            │
│         ↓                                       │
│  5. 社交与交易                                    │
│     • 发布交易挂单                                  │
│     • 浏览附近交易                                  │
│     • 在频道中交流                                  │
│         ↓                                       │
│  6. 查看成就和排行榜                                │
│     • 完成成就获得奖励                              │
│     • 查看自己的排名                                │
│                                                 │
└─────────────────────────────────────────────────┘
```

### 3.2 进阶循环（周循环）

```
周一-周五: 通勤探索，积累资源
周末: 集中圈地、建造、社交
每周重置: 周榜排名、周活动
```

---

## 4. 核心玩法系统

### 4.1 圈地系统 (Territory System)

#### 4.1.1 设计目标
- 激励玩家外出行走
- 提供领地扩张的成就感
- 创造地域竞争和合作

#### 4.1.2 圈地规则

**基础规则**:
- 玩家在地图上行走，GPS轨迹形成蓝色路径
- 当轨迹首尾闭合（距离起点<50米）时，形成多边形
- 系统验证多边形合法性后，领地归玩家所有

**合法性验证**:
1. **面积要求**:
   - 最小面积: 500m² (约22m × 22m)
   - 最大面积: 50,000m² (单次圈地限制)
   - 理由: 防止过小（无意义）或过大（不真实）的领地

2. **形状要求**:
   - 不能自交（轨迹不能交叉）
   - 不能是线段（必须是封闭多边形）
   - 不能过于狭长（长宽比 < 10:1）

3. **速度验证**（防作弊）:
   - 平均速度 < 20 km/h（步行+跑步速度）
   - 最大瞬时速度 < 30 km/h
   - 超速判定为交通工具作弊，圈地无效

4. **重叠检测**:
   - 不能与其他玩家的领地重叠
   - 如有重叠，显示冲突区域，提示调整路线

5. **冷却时间**:
   - 圈地成功后，30分钟内不能再次圈地
   - 理由: 防止短时间内大量圈地

#### 4.1.3 领地属性

**领地数据**:
- 领地ID（唯一标识）
- 领地名称（玩家自定义）
- 多边形坐标（GeoJSON格式）
- 面积（平方米）
- 占领时间
- 最后活跃时间
- 建筑数量
- 允许交易（开关）

**领地状态**:
- 活跃: 正常使用
- 警告: 30天未建造，收到警告
- 濒危: 90天未活跃，7天后回收
- 已回收: 重新变为无主地

#### 4.1.4 数值设计

| 指标 | 数值 | 说明 |
|------|------|------|
| 最小面积 | 500m² | 防止无意义小地块 |
| 推荐面积 | 2,000-10,000m² | 平衡游玩时间和成就感 |
| 最大单块面积 | 50,000m² | 防止单次圈地过大 |
| 玩家领地上限 | 10块 | 免费玩家上限，订阅用户20块 |
| 总面积上限 | 200,000m² | 防止资源过度集中 |
| 圈地冷却时间 | 30分钟 | 鼓励深度游玩而非快餐式圈地 |
| 建造警告期 | 30天 | 督促玩家使用领地 |
| 回收警告期 | 90天未活跃 | 释放不活跃玩家的资源 |

---

### 4.2 探索系统 (Exploration System)

#### 4.2.1 设计目标
- 激励玩家探索现实世界
- 提供持续的资源获取途径
- 创造"Walk to Earn"的核心体验

#### 4.2.2 POI机制

**POI类型与资源映射**:

| POI类型 | 图标 | 主要资源 | 次要资源 | 稀有资源 |
|---------|------|----------|----------|----------|
| 医院/诊所 | 🏥 | 药品（70%）| 布料（20%）| 医疗器械（10%）|
| 超市/餐厅 | 🏪 | 罐头食品（60%）| 饮用水（30%）| 种子（10%）|
| 工厂/工地 | 🏭 | 金属材料（50%）| 石头（30%）| 工具（20%）|
| 公园/林地 | 🌳 | 木材（70%）| 药草（20%）| 动物皮毛（10%）|
| 银行/珠宝店 | 🏦 | 金币（40%）| 稀有材料（40%）| 电子元件（20%）|
| 加油站 | ⛽ | 燃料（60%）| 金属（20%）| 车辆零件（20%）|
| 学校/图书馆 | 📚 | 书籍（50%）| 布料（30%）| 稀有图纸（20%）|

**POI等级**:
- **普通POI**: 小商店、小公园（资源×1）
- **优质POI**: 大超市、中型医院（资源×1.5）
- **稀有POI**: 购物中心、三甲医院（资源×2）
- **传奇POI**: 地标建筑、著名景点（资源×3，额外稀有资源）

#### 4.2.3 搜刮规则

**触发条件**:
- 玩家进入POI 100米范围内
- 该POI今日未被该玩家搜刮过
- 玩家背包未满

**搜刮流程**:
1. 进入范围自动弹出"发现兴趣点"提示
2. 点击"搜刮"按钮开始搜刮
3. 显示搜刮动画（3秒）
4. 随机生成3-5种物品
5. 物品自动进入背包
6. POI标记为"已搜刮"（当日不可再次搜刮）

**资源生成算法**:
```
物品数量 = 基础数量 × POI等级系数 × 会员加成 × 随机因子
基础数量 = 5-15（随机）
POI等级系数 = 1.0 / 1.5 / 2.0 / 3.0
会员加成 = 免费用户1.0，月卡用户1.3，通行证用户1.5
随机因子 = 0.8-1.2（增加不确定性）
```

**示例**:
- 普通超市，免费玩家: 5×1.0×1.0×1.0 = 5个罐头
- 稀有医院，通行证用户: 15×2.0×1.5×1.1 = 49个药品

#### 4.2.4 探索成就

| 探索距离 | 奖励 |
|----------|------|
| 累计1km | 10金币 + "初级探索者"徽章 |
| 累计10km | 50金币 + "资深探索者"徽章 |
| 累计50km | 200金币 + "传奇探索者"徽章 |
| 累计100km | 500金币 + 专属皮肤 |

| POI探索数量 | 奖励 |
|-------------|------|
| 10个 | 20金币 |
| 50个 | 100金币 |
| 100个 | 300金币 + "废墟猎人"称号 |
| 500个 | 1000金币 + 专属动画 |

---

### 4.3 资源与背包系统 (Resource & Inventory System)

#### 4.3.1 资源分类

**基础资源（建造用）**:
- 木材 🪵: 建造基础建筑
- 石头 🪨: 建造防御设施
- 金属 🔩: 建造高级建筑
- 混凝土 🧱: 建造大型建筑
- 电子元件 ⚡: 建造科技设施

**消耗资源（生存用）**:
- 罐头食品 🥫: 恢复饱食度
- 饮用水 💧: 恢复水分
- 药品 💊: 恢复生命值
- 燃料 ⛽: 车辆和发电机

**稀有资源（交易/升级用）**:
- 稀有材料 💎: 升级建筑
- 图纸 📜: 解锁高级建筑
- 种子 🌱: 农田生产
- 工具 🔧: 提升生产效率

**货币**:
- 金币 🪙: 游戏内货币，可购买资源和升级
- 钻石 💠: 高级货币（仅通过充值或稀有成就获得）

#### 4.3.2 背包系统

**容量设计**:
- 初始容量: 100格
- 扩容方式:
  - 建造小仓库: +50格
  - 建造中仓库: +100格
  - 建造大仓库: +200格
  - 订阅月卡: +50格（订阅期间有效）

**物品堆叠**:
- 基础资源: 每格最多999个
- 消耗品: 每格最多99个
- 稀有资源: 每格最多50个
- 图纸/工具: 不可堆叠，每格1个

**背包管理**:
- 支持按类型筛选
- 支持按名称搜索
- 支持批量丢弃
- 一键整理（合并同类物品）

#### 4.3.3 资源获取与消耗平衡

**日均资源获取**（中度玩家，每日探索5个POI）:
- 食物: 30-50个
- 水: 20-40个
- 木材: 20-30个
- 石头: 15-25个
- 金属: 10-20个
- 药品: 15-25个

**日均资源消耗**（开启生存体征）:
- 食物: 15-20个（每小时-5饱食度，食物+10）
- 水: 25-30个（每小时-10水分，水+10）
- 药品: 5-10个（受伤时使用）

**建造资源消耗**（平均每日建造1个建筑）:
- 木材: 20-50个
- 石头: 20-40个
- 金属: 10-30个

**资源平衡结论**:
- 食物和水：基本自给自足，略有盈余
- 建造资源：需要持续探索，或通过交易获取
- 设计目标：鼓励每日登录探索，防止资源过度囤积

---

### 4.4 建造系统 (Building System)

#### 4.4.1 建筑分类与数值

**Tier 1 - 生存基础建筑**

| 建筑名称 | 所需资源 | 建造时间 | 功能 |
|----------|----------|----------|------|
| 篝火 🔥 | 木材×30, 石头×20 | 即时 | 提供温暖，加快生命恢复 |
| 简易庇护所 🏚️ | 木材×50, 布料×20 | 30分钟 | 休息场所，加快体征恢复 |
| 小仓库 📦 | 木材×40, 石头×30 | 1小时 | 增加背包容量+50 |
| 水井 🚰 | 石头×50, 工具×1 | 2小时 | 每日自动生产水×10 |
| 小农田 🌾 | 木材×30, 种子×5 | 3小时 | 每日自动生产食物×5 |

**Tier 2 - 功能扩展建筑**

| 建筑名称 | 所需资源 | 建造时间 | 功能 |
|----------|----------|----------|------|
| 木屋 🏡 | 木材×100, 石头×80, 金属×30 | 4小时 | 高级庇护所，体征恢复速度×2 |
| 中仓库 🏪 | 木材×80, 金属×50, 混凝土×40 | 6小时 | 增加背包容量+100 |
| 工作台 🔨 | 木材×60, 金属×40, 工具×2 | 4小时 | 可加工原材料为高级材料 |
| 农场 🚜 | 木材×80, 种子×20, 工具×3 | 8小时 | 每日自动生产食物×20 |
| 雨水收集器 🌧️ | 金属×50, 混凝土×30 | 5小时 | 每日自动生产水×30 |

**Tier 3 - 高级科技建筑**

| 建筑名称 | 所需资源 | 建造时间 | 功能 |
|----------|----------|----------|------|
| 大仓库 🏬 | 混凝土×150, 金属×100, 稀有材料×20 | 12小时 | 增加背包容量+200 |
| 太阳能板 ☀️ | 金属×80, 电子元件×20, 稀有材料×10 | 10小时 | 每日自动生产电力，解锁科技建筑 |
| 风力发电机 🌀 | 金属×100, 电子元件×30, 稀有材料×15 | 12小时 | 每日自动生产电力×2（比太阳能高效）|
| 温室 🌿 | 混凝土×100, 玻璃×50, 电子元件×10 | 10小时 | 每日自动生产食物×50（需要电力）|
| 净水厂 💦 | 混凝土×120, 金属×80, 电子元件×15 | 10小时 | 每日自动生产水×80（需要电力）|

#### 4.4.2 建筑状态机

```
[建造中] ──时间到达──> [待激活] ──玩家激活──> [运行中]
    │                                    │
    │                                    │
    └──玩家拆除──> [已拆除]                │
                                        │
                   [损坏] <──随机事件/衰减──┘
                     │
                     └──玩家维修──> [运行中]
```

**状态说明**:
- **建造中**: 显示剩余时间，可以使用钻石加速
- **待激活**: 建造完成，需要玩家点击"激活"才能使用
- **运行中**: 正常工作，可以升级、维修、拆除
- **损坏**: 停止工作，需要消耗资源维修（50%建造成本）
- **已拆除**: 返还30%资源，建筑消失

#### 4.4.3 建筑升级系统

每个建筑可以升级到Lv.5，每次升级增强效果：

| 等级 | 升级成本 | 效果提升 |
|------|----------|----------|
| Lv.1 | - | 基础效果 |
| Lv.2 | 建造成本×50% | 效果×1.2 |
| Lv.3 | 建造成本×100% | 效果×1.5 |
| Lv.4 | 建造成本×150% | 效果×2.0 |
| Lv.5 | 建造成本×200% | 效果×3.0 |

**示例 - 小农田升级**:
- Lv.1: 每日生产食物×5
- Lv.2: 每日生产食物×6（5×1.2）
- Lv.3: 每日生产食物×8（5×1.5）
- Lv.4: 每日生产食物×10（5×2.0）
- Lv.5: 每日生产食物×15（5×3.0）

---

### 4.5 交易系统 (Trading System)

#### 4.5.1 设计目标
- 创造玩家间的资源流通
- 鼓励地理位置上的社交互动
- 平衡资源分布不均的问题

#### 4.5.2 交易规则

**交易类型**:
- 物物交易：A物品换B物品（无货币参与）
- 定价交易：用金币购买物品（v2.0）

**交易流程**:
1. 卖家在领地发布挂单
   - 选择"我提供"的物品（从背包选择）
   - 选择"我需要"的物品（从物品库选择）
   - 确认发布
2. 买家浏览附近挂单
   - 只能看到100米范围内的挂单
   - 查看挂单详情
3. 买家接受交易
   - 系统检查双方资源
   - 双方同时扣除物品
   - 交易完成，发送通知

**地理限制**:
- 挂单只对领地100米范围内的玩家可见
- 目的: 鼓励玩家探索城市，增加线下相遇的可能性
- 特殊: 订阅用户可以发布"全局挂单"（所有玩家可见）

#### 4.5.3 交易数值设计

**交易手续费**:
- 免费用户: 每笔交易扣除5%交易税（金币）
- 月卡用户: 免手续费
- 目的: 提供付费动力，控制经济通胀

**交易限制**:
- 免费用户: 每日最多发布3个挂单
- 月卡用户: 每日最多发布10个挂单
- 通行证用户: 无限制

**常见交易比例**（市场自然形成）:
- 10罐头 ≈ 5药品
- 30木材 ≈ 20金属
- 50石头 ≈ 30混凝土
- 1稀有材料 ≈ 100基础资源

---

### 4.6 社交通讯系统 (Communication System)

#### 4.6.1 公共频道（范围3km）

**设计目标**:
- 建立基于地理位置的本地社区
- 促进附近玩家的实时互动
- 传递"废土电台"的世界观氛围

**功能设计**:
- 覆盖范围: 以玩家为中心，半径3km
- 消息显示: 昵称 + 头像 + 消息内容 + 时间
- 实时推送: 使用Supabase Realtime，延迟<2秒
- 消息保留: 最近100条消息，超过自动删除

**防刷屏机制**:
- 发送频率: 10秒/条
- 字数限制: 200字符/条
- 敏感词过滤: 暴力、色情、政治敏感词自动屏蔽

#### 4.6.2 频道系统（主题群组）

**频道类型**:
- 交易频道 🛒: 发布交易信息
- 联盟频道 🛡️: 联盟内部交流（v2.0）
- 求助频道 🆘: 寻求帮助或组队
- 闲聊频道 💬: 随意聊天

**频道权限**:
- 创建频道: 消耗100金币
- 加入频道: 免费
- 频道人数上限: 100人
- 频道管理: 创建者可踢人、设置公告

#### 4.6.3 PTT对讲机系统

**设计理念**:
模拟真实对讲机的Push-to-Talk体验，增强沉浸感。

**操作流程**:
1. 进入"呼叫"标签
2. 选择频道（公共频道/加入的频道）
3. 长按麦克风按钮录音（最长30秒）
4. 松开自动发送
5. 附近玩家自动播放语音

**设备等级限制**:
- 收音机（免费）: 只能接收，不能发送
- 对讲机（100金币）: 可收发，范围3km
- 营地电台（500金币）: 范围10km
- 卫星通讯（2000金币）: 全球范围

**语音质量**:
- 采样率: 16kHz（模拟对讲机音质）
- 格式: AAC
- 大小限制: 每条<1MB

---

### 4.7 生存体征系统 (Vital Signs System)

#### 4.7.1 设计目标
- 增加游戏紧迫感和挑战性
- 创造资源消耗循环
- 提供硬核生存体验（可选开启）

#### 4.7.2 体征数值

**三大体征**:

1. **核心生命值（HP）**
   - 初始值: 100/100
   - 降低原因: 饱食度/水分过低、受伤
   - 恢复方式: 使用药品、在庇护所休息
   - 降到0: 角色死亡（见死亡惩罚）

2. **饱食度（Hunger）**
   - 初始值: 100%
   - 衰减速度: -5%/小时
   - 恢复方式: 使用食物（罐头+10%，肉类+15%）
   - 低于30%: HP每小时-5
   - 低于10%: 移动速度-30%

3. **水分（Thirst）**
   - 初始值: 100%
   - 衰减速度: -10%/小时（比饥饿快）
   - 恢复方式: 使用水（+10%）
   - 低于30%: HP每小时-10（比饥饿更致命）
   - 低于10%: 探索效率-50%

#### 4.7.3 状态效果

**正面状态（饱食度和水分都>80%）**:
- "营养良好": 探索效率+20%，POI资源获取+10%
- "精力充沛": 圈地速度+15%，建造时间-10%

**负面状态**:
- 饥饿（<30%）: 移动速度-20%，HP每小时-5
- 脱水（<30%）: 探索效率-30%，HP每小时-10
- 濒死（HP<20%）: 移动速度-50%，无法建造和交易

#### 4.7.4 死亡与复活

**死亡判定**:
- 核心生命值降到0

**死亡惩罚**:
- 损失50%背包物品（随机掉落）
- 损失10%金币
- 在最后一个庇护所或领地中心复活

**复活机制**:
- 自动复活: 5分钟后自动复活，HP恢复到50%
- 钻石复活: 花费50钻石立即满血复活（可选）

#### 4.7.5 难度设置

为了平衡硬核玩家和休闲玩家，提供三档难度：

| 难度 | 衰减速度 | 死亡惩罚 | 适合人群 |
|------|----------|----------|----------|
| 休闲模式 | 饥饿-2%/h, 口渴-5%/h | 损失20%物品 | 休闲玩家 |
| 标准模式 | 饥饿-5%/h, 口渴-10%/h | 损失50%物品 | 普通玩家（默认）|
| 硬核模式 | 饥饿-10%/h, 口渴-15%/h | 损失80%物品，领地降级 | 挑战玩家 |

---

## 5. 进阶系统设计

### 5.1 成就系统 (Achievement System)

#### 5.1.1 设计目标
- 引导新手熟悉游戏机制
- 提供长期目标，提升留存
- 通过成就奖励平衡经济系统

#### 5.1.2 成就分类

**新手成就（引导型）**:

| 成就名称 | 触发条件 | 奖励 | 设计目的 |
|----------|----------|------|----------|
| 新世界的第一步 | 完成注册 | 50金币 | 欢迎奖励 |
| 新手开拓者 | 完成第一次圈地 | 100金币 | 引导圈地 |
| 末世拾荒者 | 完成第一次POI搜刮 | 100金币 | 引导探索 |
| 家园建设者 | 建造第一个建筑 | 150金币 | 引导建造 |
| 初次交易 | 完成第一次交易 | 200金币 | 引导交易 |
| 社交达人 | 加入第一个频道 | 100金币 | 引导社交 |

**进阶成就（积累型）**:

| 成就名称 | 触发条件 | 奖励 | 完成难度 |
|----------|----------|------|----------|
| 小地主 | 拥有3块领地 | 300金币 | 中等 |
| 大地主 | 拥有10块领地 | 1000金币 | 困难 |
| 探索先锋 | 探索100个POI | 500金币 + 徽章 | 中等 |
| 废墟猎人 | 探索500个POI | 2000金币 + 称号 | 困难 |
| 建筑大师 | 建造50个建筑 | 1000金币 | 困难 |
| 交易专家 | 完成100次交易 | 800金币 | 中等 |

**稀有成就（挑战型）**:

| 成就名称 | 触发条件 | 奖励 | 稀有度 |
|----------|----------|------|--------|
| 传奇开拓者 | 总领地面积超过100,000m² | 5000金币 + 传奇徽章 | 史诗 |
| 马拉松战士 | 累计探索距离100km | 3000金币 + 专属动画 | 史诗 |
| 排行榜之王 | 任意榜单排名第一 | 10000金币 + 传奇称号 | 传说 |
| 生存专家 | 连续存活100天（硬核模式）| 8000金币 + 专属皮肤 | 传说 |

#### 5.1.3 成就追踪

使用EventBus（事件总线）实现：
- 玩家圈地 → 发送"领地创建"事件 → 成就系统监听 → 检查相关成就
- 玩家探索POI → 发送"POI探索"事件 → 更新探索计数 → 检查成就
- 玩家建造 → 发送"建筑完成"事件 → 更新建造计数 → 检查成就

优势: 各系统解耦，易于扩展新成就

---

### 5.2 排行榜系统 (Leaderboard System)

#### 5.2.1 榜单类型

**领地面积榜**:
- 排名依据: 所有领地总面积
- 更新频率: 每5分钟
- 奖励: 每周前10名获得金币奖励

**探索废墟榜**:
- 排名依据: 探索POI总数量
- 更新频率: 每5分钟
- 奖励: 每周前10名获得稀有资源

**建筑数量榜**:
- 排名依据: 建造建筑总数量
- 更新频率: 每5分钟
- 奖励: 每周前10名获得建筑加速卡

#### 5.2.2 排名奖励

**每周排名奖励**:

| 排名 | 金币 | 稀有资源 | 专属奖励 |
|------|------|----------|----------|
| 第1名 | 5000 | 稀有材料×20 | 传奇徽章 + 全服公告 |
| 第2-3名 | 3000 | 稀有材料×10 | 史诗徽章 |
| 第4-10名 | 1500 | 稀有材料×5 | 稀有徽章 |
| 第11-50名 | 500 | - | - |
| 第51-100名 | 200 | - | - |

**赛季排名奖励**（每3个月一个赛季）:
- 前3名: 专属永久称号 + 10000金币 + 稀有皮肤
- 前10名: 5000金币 + 稀有徽章
- 前100名: 2000金币

---

### 5.3 任务系统 (Quest System)

#### 5.3.1 每日任务

每日0点刷新，完成可获得金币和经验值：

| 任务名称 | 任务目标 | 奖励 |
|----------|----------|------|
| 每日探索 | 探索3个POI | 100金币 + 50经验 |
| 每日建造 | 建造或升级1个建筑 | 150金币 + 80经验 |
| 每日交易 | 完成1次交易 | 120金币 + 60经验 |
| 每日社交 | 在公共频道发送10条消息 | 80金币 + 40经验 |

**每日任务全部完成奖励**: +200金币

#### 5.3.2 每周任务

每周一刷新：

| 任务名称 | 任务目标 | 奖励 |
|----------|----------|------|
| 每周探索 | 探索20个POI | 500金币 + 200经验 |
| 每周圈地 | 圈占2块新领地 | 600金币 + 300经验 |
| 每周建造 | 建造5个建筑 | 800金币 + 400经验 |
| 每周交易 | 完成10次交易 | 700金币 + 350经验 |

**每周任务全部完成奖励**: +1000金币 + 稀有资源×3

---

## 6. 商业化设计

### 6.1 付费模式

#### 6.1.1 订阅制（月卡）

**开拓者月卡 - $9.99/月**:
- 每日探索POI无限制（免费用户每日5次）
- POI搜刮资源+30%
- 背包容量+50
- 交易无手续费
- 每日赠送50金币

**领主通行证 - $19.99/月**:
- 包含月卡所有特权
- 专属皮肤和头像框
- 专属徽章和称号
- 每月赠送500金币
- 领地上限翻倍（10→20）
- 可发布全局交易挂单

#### 6.1.2 一次性内购

**资源包**:
- 初级物资包 - $0.99: 食物×50, 水×50
- 中级物资包 - $2.99: 木材×100, 金属×80, 金币×200
- 高级物资包 - $4.99: 混凝土×50, 稀有材料×10, 金币×500
- 稀有资源包 - $9.99: 稀有材料×30, 图纸×5, 金币×1200

**金币包**:
- 小金币包 - $0.99: 200金币
- 中金币包 - $4.99: 1200金币（+20%赠送）
- 大金币包 - $9.99: 2800金币（+40%赠送）
- 超级金币包 - $49.99: 18000金币（+80%赠送）

**功能性内购**:
- 背包扩容卡 - $1.99: 永久+50容量
- 建造加速卡 - $0.99: 5张，每张减少1小时建造时间
- 复活卡 - $1.99: 5张，免死亡惩罚复活

### 6.2 免费与付费平衡

**核心原则**:
- Pay for Convenience, NOT Pay to Win（付费买便利，不是买胜利）
- 免费玩家可以体验所有核心玩法
- 付费玩家节省时间，但不能直接购买排行榜优势

**免费玩家限制**:
- 每日POI探索上限: 5次（鼓励付费，但不阻断游玩）
- 交易手续费: 5%（轻微不便）
- 背包容量: 标准100格（可通过建造仓库扩容）
- 领地上限: 10块（已经很宽松）

**付费玩家优势**:
- 无探索上限（肝度更高）
- 资源获取更快（+30%）
- 背包更大（更少整理时间）
- 专属外观（炫耀）

### 6.3 收入预测

**用户规模假设**:
- DAU（日活跃用户）: 10,000（3个月内）
- 付费转化率: 3%（行业平均2-5%）
- 付费用户: 300人

**收入构成**:
- 订阅收入: 150人购买月卡($9.99) + 50人购买通行证($19.99) = $1,498.5 + $999.5 = $2,498/月
- 内购收入: 100人平均消费$5 = $500/月
- 广告收入: 暂不考虑（v2.0加入）

**总收入**: 约$3,000/月 = $36,000/年

**成本**:
- Supabase费用: $25/月（Pro计划）
- 服务器费用: $50/月（扩容后）
- Apple开发者费用: $99/年
- 营销费用: $500/月

**净利润**: 约$2,400/月 = $28,800/年

---

## 7. 用户体验设计 (UX Design)

### 7.1 新手引导

#### 7.1.1 强制教程（首次登录）

**第1步 - 欢迎界面**（30秒）:
- 播放末日背景动画
- 旁白: "2051年，你从避难所醒来..."
- 引导玩家输入昵称

**第2步 - 圈地教学**（5分钟）:
- 高亮"开始圈地"按钮
- 提示: "走一小圈，画出你的第一块领地"
- 完成后奖励: 200金币

**第3步 - 探索教学**（3分钟）:
- 引导玩家走到附近的POI
- 触发搜刮，展示资源获取
- 完成后奖励: 初级物资包

**第4步 - 建造教学**（2分钟）:
- 引导打开建造界面
- 引导建造篝火（资源已足够）
- 完成后奖励: 100金币

**第5步 - 社交教学**（1分钟）:
- 引导进入公共频道
- 引导发送一条消息
- 完成后奖励: "新手开拓者"徽章

**总时长**: 约15分钟（实际需要外出行走，时间可能更长）

#### 7.1.2 可跳过教程

对于有LBS游戏经验的玩家，提供"跳过教程"选项：
- 跳过后仍然发放所有教学奖励
- 通过成就系统引导（完成XX获得XX金币）

---

### 7.2 UI/UX规范

#### 7.2.1 视觉风格

**色彩方案**:
- 主色: 绿色（#2ECC71）- 代表希望、生机
- 辅色: 蓝色（#3498DB）- 代表水、天空
- 强调色: 橙色（#E67E22）- 代表火、能量
- 背景: 深灰（#2C3E50）+ 棕色（#7F8C8D）- 废土感

**字体**:
- 标题: SF Pro Display Bold（苹果系统字体，现代感）
- 正文: SF Pro Text Regular
- 特殊: Courier New（模拟终端，用于关键数据）

**图标风格**:
- 扁平化设计
- 带有末日元素（锈迹、破损、焊接痕迹）
- 使用SF Symbols为基础，自定义修改

#### 7.2.2 交互规范

**按钮反馈**:
- 点击: 0.2秒缩放动画 + 震动反馈（轻微）
- 长按: 1秒后触发 + 进度圈提示

**页面切换**:
- 使用SwiftUI原生滑动动画
- 避免过于花哨的转场（性能优先）

**加载状态**:
- 使用骨架屏（Skeleton Screen）而非菊花转
- 显示加载进度百分比

**错误提示**:
- Toast轻提示（非模态，3秒自动消失）
- Alert重要提示（模态，需要用户确认）
- 错误信息清晰，提供解决方案

---

### 7.3 无障碍设计

- 支持VoiceOver（视障用户）
- 支持动态字体大小
- 色盲模式（可选）
- 支持单手操作（主要按钮在底部）

---

## 8. 技术实现要点

### 8.1 性能优化

**地图渲染优化**:
- 只渲染可视区域的领地
- 使用LOD（细节层次）技术，远处领地简化渲染
- 领地多边形使用简化算法（Douglas-Peucker）

**GPS定位优化**:
- 使用融合定位（GPS + WiFi + 蜂窝）
- 在室内自动降低定位频率（省电）
- 轨迹点抽稀（每5米记录一次，而非每秒）

**数据同步优化**:
- 使用增量同步（只同步变化的数据）
- 本地优先（Local-First），后台异步同步
- 冲突解决策略: 服务器数据优先（防止作弊）

**图片资源优化**:
- 使用WebP格式（比PNG小30%）
- 使用Asset Catalog自动生成@2x、@3x
- 懒加载图片（滚动到才加载）

### 8.2 安全防作弊

**GPS作弊检测**:
- 速度检测: 平均速度 > 20km/h 视为作弊
- 跳跃检测: 两点距离 > 500m 视为作弊
- 轨迹平滑度检测: 轨迹过于规则（完美直线）视为模拟

**交易作弊检测**:
- 检测异常交易（1个罐头换100个稀有材料）
- 小号养大号检测（同一设备多账号交易）

**刷榜检测**:
- 单日异常增长检测（一天圈地100块）
- 行为模式检测（24小时不停探索）

**作弊惩罚**:
- 首次警告: 封禁3天 + 清空作弊获得的资源
- 二次警告: 封禁30天 + 排行榜移除
- 三次警告: 永久封禁

---

## 9. 数据分析与运营

### 9.1 核心数据指标

**留存指标**:
- 次日留存率（Day 1 Retention）
- 7日留存率（Day 7 Retention）
- 30日留存率（Day 30 Retention）

**活跃指标**:
- DAU（日活跃用户）
- MAU（月活跃用户）
- DAU/MAU比率（活跃度）

**付费指标**:
- 付费转化率
- ARPU（平均每用户收入）
- ARPPU（平均每付费用户收入）
- LTV（用户生命周期价值）

**玩法指标**:
- 日均圈地次数
- 日均探索POI数量
- 日均聊天消息数
- 交易成功率

### 9.2 运营活动

**每周活动**:
- 周末双倍资源（周六日POI资源×2）
- 特殊POI限时刷新（银行POI额外奖励）

**节日活动**:
- 春节: 红包雨（地图上随机刷新红包POI）
- 圣诞节: 圣诞树POI（特殊装饰建筑）
- 万圣节: 南瓜地POI（特殊资源）

**排行榜赛季**:
- 每3个月一个赛季
- 赛季结束清空排行榜，发放奖励
- 新赛季开始，所有人重新竞争

---

## 10. 未来规划 (Roadmap)

### v1.0 - MVP版本（当前）
- ✅ 登录注册
- ✅ GPS圈地
- ✅ POI探索
- ✅ 背包系统
- ✅ 建造系统
- ✅ 交易系统
- ✅ 通讯系统
- ✅ 排行榜
- ✅ 成就系统
- ✅ 付费订阅

### v1.5 - 社交强化版（Q2 2026）
- 联盟系统（玩家组建联盟，共同发展）
- 好友系统（添加好友，赠送礼物）
- 邮件系统（玩家间发送消息和物品）
- 联盟领地（联盟成员共同建造）

### v2.0 - PvP对抗版（Q3 2026）
- 领地争夺战（攻占其他玩家领地）
- 联盟战争（联盟之间的竞争）
- 防御塔系统（保护领地）
- 战斗系统（攻击和防御）

### v2.5 - AR增强版（Q4 2026）
- AR圈地（使用ARKit在现实中可视化领地）
- AR建筑（在现实中查看建筑3D模型）
- AR探索（AR寻宝游戏）

### v3.0 - 全球扩展版（2027）
- 跨国联盟
- 全球排行榜
- 世界地标特殊事件
- 多语言本地化（10种语言）

---

## 11. 附录

### 11.1 游戏平衡性测试清单

**圈地平衡性**:
- [ ] 日均圈地次数是否在合理范围（1-3次）
- [ ] 圈地时间是否合理（10-30分钟/次）
- [ ] 领地面积分布是否健康（避免少数玩家垄断）

**探索平衡性**:
- [ ] 日均POI探索次数是否合理（3-10次）
- [ ] 资源获取速度是否匹配消耗速度
- [ ] 不同POI类型的资源分布是否平衡

**建造平衡性**:
- [ ] 建造时间是否合理（不过长导致放弃）
- [ ] 资源消耗是否匹配获取速度
- [ ] 建筑升级成本是否递增合理

**交易平衡性**:
- [ ] 交易比例是否健康（无恶意套利）
- [ ] 交易频率是否正常（无刷榜行为）

**生存体征平衡性**:
- [ ] 衰减速度是否合理（不过快导致疲劳）
- [ ] 资源消耗是否匹配获取（可持续）

### 11.2 名词术语表

| 术语 | 英文 | 解释 |
|------|------|------|
| LBS | Location-Based Service | 基于位置的服务 |
| POI | Point of Interest | 兴趣点，真实地理位置 |
| GPS | Global Positioning System | 全球定位系统 |
| PTT | Push to Talk | 一键通，对讲机模式 |
| AR | Augmented Reality | 增强现实 |
| BaaS | Backend as a Service | 后端即服务 |
| DAU | Daily Active Users | 日活跃用户数 |
| MAU | Monthly Active Users | 月活跃用户数 |
| ARPU | Average Revenue Per User | 平均每用户收入 |
| LTV | Lifetime Value | 用户生命周期价值 |

### 11.3 参考文献

1. 《宝可梦GO》游戏设计分析报告
2. 《Ingress》LBS游戏机制研究
3. Apple MapKit官方文档
4. Supabase实时数据库最佳实践
5. 《游戏设计艺术》- Jesse Schell
6. 《上瘾：让用户养成使用习惯的四大产品逻辑》

---

**文档结束**

*本GDD基于《地球新主》游戏功能详解文档生成，详细阐述了游戏系统设计、数值平衡、UX设计和未来规划。*
